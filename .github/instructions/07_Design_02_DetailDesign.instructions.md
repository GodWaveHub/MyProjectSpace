# 詳細設計書作成時の指示
- 詳細設計書作成時は必ず詳細設計書作成のルールに従って、詳細設計書を作成してください。

## 1. フォルダ構成（必須）
- 詳細設計書は `07_Design/02_DetailDesign/html/` 配下にHTML形式で作成してください。
- これ以外の場所に詳細設計書を配置してはいけません。

## 2. 書式・表示（必須）
- すべての詳細設計書はPCのEdgeブラウザで正しく表示できるHTML形式で作成してください。
- トップページのファイル名は必ず `07_Design/02_DetailDesign/html/index.html` としてください。
- 全ページでマテリアルデザインの配色・文字サイズを統一し、視認性・可読性を重視してください。

## 3. 記載範囲・対象（必須）
- 詳細設計書は、以下の情報を必ず反映してください：
  - `src/` 配下の全コード
- これ以外の情報のみを根拠に設計書を作成してはいけません。

## 4. トップページ（index.html）の構成（必須）
- ページタイトルは「システム名 詳細設計書」としてください。
- 上部にシステム名・ロゴ・作成日付を必ず配置してください。
- プログラム構成は表形式で「ファイル名」「パッケージ」「概要」を記載し、ファイル名から各詳細ページへリンクしてください。
- 設定ファイルも表形式で「ファイル名」「概要」を記載し、ファイル名から各設定ファイル詳細ページへリンクしてください。
- 必要に応じて全体シーケンス図を掲載する場合は、`07_Design/02_DetailDesign/html/assets/sequence-overview.svg` を `<img>` で埋め込んでください。

## 5. ファイルの詳細ページ（必須）
- プロジェクト内の全ファイルを対象としてください。
- ファイルの概要をページ上部に記載してください。
- ファイルの処理詳細を概要の下に記載してください。処理詳細は可能な限り細かく処理内容を記載してください。
- クラス図とシーケンス図を処理詳細の下に掲載してください。各図は「事前に画像化したファイル（SVG推奨）」を `<img>` で掲載してください。Mermaid.js をページで読み込んではいけません。
- 図版ファイル（画像）と元データ（.mmd）は `07_Design/02_DetailDesign/html/assets/` 配下に配置してください。
- 不要な図がある場合は、その理由をページ内に明記してください。
- トップページへ戻るボタンを必ず設置してください。
- 設定ファイル詳細ページとデザイン・レイアウトを統一してください。

## 6. 設定ファイルの詳細ページ（必須）
- プロジェクト内の全propertiesファイルを対象としてください。
- 各項目について「項目名」「値」「概要」を表形式で記載してください。
- ファイル概要・処理詳細をページ上部に記載してください。
- トップページへ戻るボタンを必ず設置してください。
- ファイル詳細ページとデザイン・レイアウトを統一してください。

## 7. 図版生成ルール（必須）
- 元データはMermaid記法の`.mmd`とし、画像は`.svg`を使用してください（高解像度・拡大縮小に強いため）。
- 命名規則：
  - クラス図: `class-<クラス名>.mmd` / `class-<クラス名>.svg`（例: `class-Main.mmd`）
  - シーケンス図: `sequence-<内容名>.mmd` / `sequence-<内容名>.svg`（例: `sequence-main.mmd`, `sequence-overview.mmd`）
- 生成場所はいずれも `docs/details/html/assets/` としてください。
- 画像生成はDockerを使用せず、HTTPレンダリングサービス（例: KrokiのMermaid SVGエンドポイント）を利用してください。
  - 参考手順: PowerShellスクリプト `scripts/render-mermaid.ps1` を用い、`.mmd`（UTF-8, text/plain）を `https://kroki.io/mermaid/svg` にPOSTして `.svg` を出力。
  - `.mmd` を更新したら、必ず再生成して `.svg` を最新化してください。

## 8. 役割分担・重複回避（必須）
- 本書（詳細設計）は「実装の正」とし、以下を詳細に記載します。
  - クラス/メソッドの振る舞い、I/O仕様、例外/バリデーションの詳細、ログ出力の具体形式、終了コードの発生条件。
- 「基本設計書」は横断方針・全体像を正とし、同内容の再定義は行いません。必要があれば基本設計への参照リンクを付すこと。
- 同一内容を両設計書に重複記載しないでください（片方に定義し、もう片方は参照）。

## 9. 禁止事項
- ルールに記載されていない独自の判断で内容を追加・削除・省略してはいけません。
- 配置場所・ファイル名・記載内容を勝手に変更してはいけません。
- HTML内でMermaid.jsを読み込んだり、Mermaidコードブロックを直接埋め込んではいけません（必ず画像を使用）。
- 図版生成のためにDockerを使用してはいけません。

## 10. 推奨事項
- 画像は可能な限りSVGを使用し、`alt` 属性を適切に設定してください。
- ページ内の説明や表現は、誰が読んでも誤解しないよう具体的かつ簡潔に記載してください。
- Mermaidの元データ（.mmd）は構文エラーが出ないことを確認したうえでコミットしてください。
