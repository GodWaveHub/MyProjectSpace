# 基本設計書作成時の指示
- 基本設計書作成時は必ず基本設計書作成のルールに従って、基本設計書を作成してください。

## 1. フォルダ構成（必須）
- 基本設計書は `07_Design/01_BasicDesign/html/` 配下にHTML形式で作成してください。
- 設計図の元データ（Mermaid等）は `07_Design/01_BasicDesign/md/` 配下にMarkdown/`.mmd`形式で管理してください。
- これ以外の場所に基本設計書を配置してはいけません。

## 2. 書式・表示（必須）
- すべての基本設計書はPCのEdgeブラウザで正しく表示できるHTML形式で作成してください。
- トップページのファイル名は必ず `07_Design/01_BasicDesign/html/index.html` としてください。
- 全ページでマテリアルデザインの配色・文字サイズを統一し、視認性・可読性を重視してください。
- 図版は事前にSVGへ変換して `<img>` で埋め込んでください（詳細は9章「図版生成ルール」を参照）。

## 3. 記載範囲・対象（必須）
- 基本設計書は、以下の情報を必ず反映してください：
  - `src/` 配下の全コードと設定ファイル
  - `07_Design/02_DetailDesign/` 配下の詳細設計書（相互参照）
- クラスやメソッドの振る舞い、I/O仕様、例外・バリデーションの詳細は詳細設計書で扱います（本書では再記載しない）。

## 4. トップページ（index.html）の構成（必須）
- ページタイトルは「システム名 基本設計書」としてください。
- 上部にシステム名・ロゴ・作成日付を必ず配置してください。
- 目次として以下へのリンクを記載してください：
  - 機能一覧
  - 画面遷移図
  - 全体ER図
  - 全体クラス図（システム/コンポーネント構成レベルの概念図）
  - 全体シーケンス図（システム/ユースケースの全体時系列）
  - 外部インターフェース
  - 環境・前提条件
  - 終了コード
  - ログ方針
  - 運用・監視
  - 未決定事項
- 各設計図はHTMLで作成し、`07_Design/01_BasicDesign/html/` 配下に配置してください。
- 設計図の元データ（md/`.mmd`ファイル）は `07_Design/01_BasicDesign/md/` 配下に配置してください。

## 5. 各設計図ページのルール（必須）
- すべての設計図は、9章で生成したSVGを `<img>` で表示してください。
- トップページ・各ページは必ず同じ配色・文字サイズ・レイアウトを用いてください。
- 目次で示した全ての設計図（機能一覧・画面遷移図・ER図・クラス図・シーケンス図・外部インターフェース）を作成してください。
- クラス図・シーケンス図は「システム/サブシステム/コンポーネント粒度」に限定し、個別クラス/メソッドの詳細図は掲載しない（詳細は詳細設計書へ委譲）。

## 6. 横断設計項目（必須・本書が正）
- 基本設計書には、以下の横断項目を必ず記載し、本書を正とします（詳細設計書での再定義は禁止。必要に応じて参照リンクのみ）：
  - 環境・前提条件：言語バージョン/ビルドツール/対応OS/ブラウザ/フォント等の前提や制約。
  - 終了コード：終了コードと意味の一覧（正常・設定エラー・入力不正・ロック失敗・I/O・想定外等）。
  - ログ方針：出力先、フォーマット（日時/ロケール/タイムゾーン）、レベル、ローテーション、機微情報の扱い。
  - 運用・監視：監視観点（生成物の有無/終了コード/エラーログ）、リトライ方針、復旧手順の要点。
  - 未決定事項：未確定の仕様と決定方針（今後の対応メモ）。

## 7. 禁止事項
- ルールに記載されていない独自の判断で内容を追加・削除・省略してはいけません。
- 配置場所・ファイル名・記載内容を勝手に変更してはいけません。
- 詳細設計書の内容（クラス/メソッド仕様、入出力フォーマット、例外一覧、テスト観点等）を重複記載してはいけません（概要レベルの要約・参照は可）。
- 公開版の基本設計書に「（暫定）」等の暫定表記を残したままにしてはいけません（レビュー中の草案は可）。

## 8. 推奨事項
- ページ内の説明や表現は、誰が読んでも誤解しないよう具体的かつ簡潔に記載してください。
- Mermaidの元データ（.mmd）は構文エラーが出ないことを確認してください。
- 横断設計項目は詳細設計書と用語を揃え、相互リンクを設定してください（例: 詳細設計の各ページから本書の該当セクションへリンク）。

## 9. 図版生成ルール（SVG方針）
- 元データ: Mermaid記法（`.mmd` または Markdown内のMermaidブロック）を `07_Design/01_BasicDesign/md/` 配下で管理します。
- 画像化（必須）: KrokiのMermaid SVGエンドポイント（`https://kroki.io/mermaid/svg`）を使用してSVGを生成します。Dockerは使用しません。
- 生成先: 生成したSVGは `07_Design/01_BasicDesign/html/assets/` 配下に配置してください（存在しない場合は作成）。
- 命名規則: 
  - クラス図: `class-<名称>.mmd` / `class-<名称>.svg`
  - シーケンス図: `sequence-<名称>.mmd` / `sequence-<名称>.svg`
  - 画面遷移図/ER図等も同様に `flow-<名称>`, `er-<名称>` を推奨
- ツール: PowerShellスクリプト `scripts/render-mermaid.ps1` を用い、`.mmd`（UTF-8, text/plain）をKrokiへPOSTして `.svg` を出力してください。
- 再生成: `.mmd` を更新したら、必ず再生成して `.svg` を最新化してください。
- 表示: 生成済みSVGを `<img>` で埋め込んで表示してください。MermaidのCDN/スクリプトをHTMLに読み込んではいけません。
- 禁止: 図版生成のためにDockerを使用してはいけません。著作権侵害となる画像や図版の利用は禁止します。
