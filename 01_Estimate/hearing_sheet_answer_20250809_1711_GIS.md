# 見積ヒアリングシート（回答／仮想プロジェクト：電力GIS）

<!-- copilot-instructionsのルールを確認しました！ -->
<!-- estimate.instructions.mdのルールを確認しました！ -->

本回答は、提示条件に基づく仮想プロジェクトの想定情報です。過不足は追って確定前提とします。

## 1. プロジェクト概要
- プロジェクト名: 電力GIS統合基盤構築（GeoMation + Web + Postgres）
- 背景/目的: 電力設備情報（電柱・変圧器・配電線 等）と需要家情報を一元管理し、周辺システムと差分バッチで堅牢かつ効率的に連携。設備保全・計画立案・問い合わせ対応の高度化。
- 成果物一覧: Web GISシステム、バックエンドAPI、PostgreSQL/ PostGIS スキーマ、差分連携バッチ（入出力IF・スケジューラ設定含む）、Okta連携設定、権限モデル設計、オフライン参照アプリ/パッケージ、監視/運用手順書、データ移行・品質ルール。
- 期待する完了条件(DoD): 主要機能の本番稼働、差分連携の安定運用（連携遅延・エラー率基準内）、性能SLO達成、権限統制・監査要件合致、UAT合格、運用ドキュメント整備。

## 2. ステークホルダー
- 発注者/意思決定者: 電力会社 情報システム部（想定）
- 主要利用者(ペルソナ): 設備保全担当、配電計画担当、コールセンター/需要家対応、現場担当（オフライン参照）
- コンタクト/承認フロー: 情シスPM→業務代表→セキュリティレビュー→運用チーム引継ぎ

## 3. スコープ定義
- 対象機能一覧:
  - 地図表示/レイヤ制御（電柱/線路/設備/需要家ポイント）
  - 検索/フィルタ/属性閲覧、近傍検索、図形選択
  - 設備・需要家の関連参照（設備-需要家紐付け）
  - ダッシュボード（設備統計、障害/工事エリア概況: 将来拡張）
  - 差分連携（周辺システム⇔GIS、夜間バッチ中心・将来CDC検討）
  - 権限管理（Okta連携、ロール/所属ベースRBAC）
  - オフライン参照（現場端末向けデータパッケージング/差分配布）
- 非機能要求:
  - 性能: P95 検索<800ms、地図タイル/描画<500ms（条件付き）、同時利用600、並列300想定
  - 可用性: 99.9%（連携はバッチ窓口内で再試行・リカバリ設計）
  - セキュリティ: Okta OIDC/OAuth、所属/ロールRBAC、操作監査ログ、静止/転送時暗号化
  - 拡張性: レイヤ/属性の将来追加、CDC/ストリーミング対応余地
  - 運用性: 監視メトリクス/アラート標準化、バッチ可観測性
- 対象外(スコープ外): ネイティブモバイルアプリ（当面）、3D可視化、高頻度リアルタイム連携（当面）
- 依存関係: 需要家管理、設備資産管理、工事管理/工事進捗、請求/顧客、認証基盤(Okta)、地図ベースエンジン(GeoMation)、メール/Teams通知、ファイル倉庫（ログ/エクスポート）

## 4. 制約条件
- 期限: 初版リリース T0+6〜8ヶ月想定（詳細要協議）
- 予算目安: 中〜大規模（データ規模・GISライセンス/Okta費用を含む、詳細別途）
- 使用技術/プロダクト: GeoMation、PostgreSQL/PostGIS、Okta、Web（SPA+API）
- ライセンス/契約制約: GeoMationライセンス、Okta契約、地図/測地系データの利用条件
- 体制制約: 重要データの持出/導入セキュリティルール、リモート/拠点作業の可否、レビュー/承認ゲート

## 5. 要件詳細
- 画面/UI要件: レイヤ切替、検索、属性ポップアップ、選択/範囲指定、帳票/エクスポート、アクセシビリティ配慮
- バックエンド/APIs: RESTベース、検索/近傍/空間クエリAPI、認可コンテキスト付与、監査用ID伝播
- データ要件: Postgres + PostGIS、電柱約300万本（主テーブル3〜6GB想定＋索引/レイヤ用補助テーブル）、需要家/設備関連テーブル、履歴/監査テーブル、ジオインデックス(GiST/BRIN)最適化
- バッチ/ジョブ/スケジューリング: 夜間差分連携（D+1確定データ中心）、リトライ/再実行可能、差分キー/更新時刻ベース、ジョブ監視/可視化
- 通知/外部連携: 連携失敗/遅延の通知（メール/Teams）、運用ダッシュボード
- ログ/監査: アクセス/操作/連携トレース、PIIアクセスの監査、保持期間とマスキング方針

## 6. 品質要求
- 性能目標: 上記非機能に同じ。大量レイヤ表示は縮尺/クラスタリングで制御
- 可用性(SLA/稼働率/復旧): SLA 99.9%、RTO 2h、RPO 15min（運用と最適化要協議）
- セキュリティ: Okta(OIDC)連携、ロール/所属RBAC、行レベル/属性レベル制御、暗号化/鍵管理、脆弱性対策
- テスト方針: 単体/結合/総合/E2E、自動化カバレッジ目標 70%（UIは主要経路中心）、性能試験/バッチ信頼性試験
- ドキュメント: 要件/基本・詳細設計、運用手順、災対手順、データ辞書、連携IF仕様

## 7. 開発方式・プロセス
- 開発プロセス: アジャイル（2週間スプリント）+ マイルストーンゲート
- 品質ゲート: PRレビュー、静的解析、依存脆弱性チェック、CI/CD（デプロイ承認フロー）
- 環境/リリース: Dev/Stg/Prod、Blue-Greenまたは段階リリース、データ移行リハーサル

## 8. 開発体制・担当
- 期待ロール: PM、バックエンド、フロントエンド、GISエンジニア、DBA、QA、インフラ/運用
- 人数/期間(初期想定): 6〜9名、6〜8ヶ月（フェーズで増減）
- 外部委託: GeoMation専門SE・ライセンスベンダ連携の可能性

## 9. スケジュール
- 想定開始: 2025-09前後（調達/体制準備を考慮）
- 重要マイルストーン: 要件確定→基本設計→試作/性能検証→結合/総合→UAT→本番
- 並行案件/リスクイベント: 周辺システム改修、地図データ更新サイクル、ライセンス調達

## 10. コスト前提(見積算出の前提)
- 想定規模: レイヤ10〜15、API 30〜50、バッチ10〜15、本体LOCは後続見積で算出
- PARAMETERS.md 標準係数: 使用（Yes）
- 複雑度補正: 1.3（大規模データ/空間クエリ最適化/オフライン対応の複合性）
- 稼働率補正: 0.8（標準）
- 想定ライセンス/サブスク費: GeoMation、Okta(600ユーザ想定)、地図データ利用料（別紙で精査）

## 11. 運用・保守
- 運用時間帯/体制: 平日日中本番運用+監視、夜間バッチ窓口、障害時オンコール
- 監視/障害対応: 可用性/性能/バッチ/連携監視、プレイブック、エラーバジェット管理
- 保守範囲/改修受付: 軽微改修/問い合わせ、データ品質是正、定期リリース

## 12. リスクと前提
- リスク: データ品質/突合不一致、差分連携漏れ/再取り込み負荷、空間索引の性能ボトルネック、Okta権限設計の複雑化、オフライン同期の競合
- 対応: 前倒しのPoC/性能検証、堅牢な再実行/検算設計、データクレンジングルール、権限モデルの段階設計、オフラインは参照専用に限定（当面）
- 前提/未確定: 連携IF仕様確定、GeoMation/Okta契約条件、周辺の配信タイミング、ネットワーク/閉域要件

## 13. 付録
- 参考資料: 既存設備台帳、需要家DB定義、地図データ仕様、セキュリティ基準
- 用語集: RBAC、CDC、GiST、RTO/RPO など

---
本回答は見積の前提整理として 01_Estimate に保存し、詳細見積時は `PARAMETERS.md` の標準係数を用いて算出します。
